<!DOCTYPE html>
<meta charset="utf-8">
<html>
  <head>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/d3/d3.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script> 
    <script src="bower_components/bootstrap-select/js/bootstrap-select.js"></script>
    <script src="bower_components/mustache.js/mustache.js"></script>
    <script src="bower_components/d3-tip/index.js"></script>
    <script src="bower_components/jquery.scrollTo/jquery.scrollTo.min.js"></script>
    <script src="js/main.js"></script>

    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="bower_components/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
    <link href="css/d3tip.css" rel="stylesheet">
    <style>
      rect.bordered {
        stroke: #E6E6E6;
        stroke-width:2px;   
      }

      div#text .line{
        font-family: Merriweather,serif;
        font-size: 11pt;
      }

      #manipula{
        font-size: 14pt;
        vertical-align: middle;
        margin-left: -20px;
      }

      body{
        height: 100%;
        overflow: hidden;
      }

      blockquote p{
        font-size: 11pt;
      }

      blockquote p em{
        background-color: #fcf8e3;
        font-style: normal;
      }
      
      /* 
      TODO: set the max-height property at run time; 
      */
      .pre-scrollable{
        max-height: 530px;
      }

      #middlecolumn{
        padding-left: 30px;
      }

      #rightcolumn{
        margin:0px;
        padding-right: 10px;
      }

      div.page-header {
        margin-top: 0;
        margin-bottom: 5px;
        padding-bottom: 0;
      }

      div.page-header h1{
        margin-top: 15px;
      }

      .line{
        line-height: 2;
      }

      .line_number{
        font-family: sans-serif;
        font-size: 9pt;
        color: #808080;
        padding-right: 10px;
      }

      text.label {
        font-size: 8pt;
        font-family: Consolas, courier;
        fill: #000;
      }
    </style>
  </head>
  <body onload="initViz()">
    <span id="manipula" style="display: none">â˜ž </span>
    <div class="container-fluid">
      <!-- the page header -->
      <div class="page-header">
        <h1>Vergil's <em>Aeneid</em> in JSTOR</h1>
        <!--<p class="lead">An interactive visualization of quotations of and references to the Aeneid found within articles in JSTOR.</p>-->
        <p>Display:
          <select class="selectpicker show-tick" id="datafilter">
            <option>all</option>
            <option>quotations</option>
            <option>references</option>
          </select>
        </p>
      </div>
      <!-- the main viewport, divided into 3 columns -->
    <div class="box">
      <div class="row">
        <div class="col-md-4" id="leftcolumn">
          <div id="chart"></div>
        </div>
        <div class="col-md-4 pre-scrollable" id="middlecolumn">
          <div id="text">
          </div>
        </div>
        <div class="col-md-4 pre-scrollable" id="rightcolumn">
          <div id="results">
                
          </div>
        </div>
      </div>
    </div>
    </div>
    <!--<script async defer src="https://hypothes.is/embed.js"></script>-->
     <script id="line_number_template" type="x-tmpl-mustache">
      <span class="line_number" style="visibility:{{visibility}}">{{line}} </span>{{text}}
    </script>
    <script id="results_template" type="x-tmpl-mustache">
          {{#results}}
          <!-- one of these blocks for each line grouping -->
          <div class="panel panel-default">
              <div class="panel-heading">
                  <h4 class="panel-title">
                      <a data-toggle="collapse" data-parent="#{{parent}}" href="#collapse_{{line_label}}">{{label}}</a>
                      <span class="badge reference pull-right" title="number of references">{{ref_count}}</span>
                      <span class="badge quotation pull-right" title="number of quotations">{{quot_count}}</span>
                  </h4>
              </div>
              <div id="collapse_{{line_label}}" class="panel-collapse collapse">
                  <div class="panel-body">
                      <ul class="list-group">
                      {{#results}}
                          <li class="list-group-item {{type}}">
                            <h5 class="list-group-item-heading">
                              {{#document}}
                              {{author}}
                              {{#year}}
                              ({{.}})
                              {{/year}}
                              "{{title}}" 
                              <em>{{journaltitle}}</em>
                              [<a href="{{url}}" target="_blank">
                                {{doi}}
                              </a>]
                              {{/document}}
                            </h5>
                            <blockquote>
                              <p>{{{snippet}}}</p>
                              <small>{{id}} {{type}}</small>
                            </blockquote>
                          </li>
                      {{/results}}
                      </ul>
                  </div>
              </div>
          </div>
          {{/results}}
    </script>
  </body>
</html>